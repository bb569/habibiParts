(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4005],{4519:(e,t,r)=>{Promise.resolve().then(r.bind(r,3270))},3270:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var l=r(5155),n=r(4201),s=r(2115),d=r(8270),a=r(8173),i=r.n(a);function c(e){let{id:t}=e,{handleQty:r,deHandleQty:n,getQty:s,allDelet:a}=(0,d.n)();return(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("button",{className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded",onClick:()=>r(t),children:"+"}),(0,l.jsx)("span",{className:"border rounded px-3 py-1",children:s(t)}),(0,l.jsx)("button",{className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded",onClick:()=>n(t),children:"-"}),(0,l.jsx)("button",{className:"bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded",onClick:()=>a(t),children:"حذف از سبد"})]})}var o=r(2651);let u=function(e){let{id:t,qty:r}=e,[n,d]=(0,s.useState)({});return(0,s.useEffect)(()=>{(0,o.A)("http://localhost:8000/datas/".concat(t)).then(e=>{let{data:t}=e;d(t)})},[]),(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg rounded-lg overflow-hidden",children:[(0,l.jsx)(i(),{href:"/store/".concat(t),children:(0,l.jsx)("img",{className:"w-full h-48 object-cover",src:n.imag})}),(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-2",children:n.title}),(0,l.jsxs)("p",{className:"text-gray-600 mb-2",children:["سفارشات:",r]}),(0,l.jsxs)("p",{className:"text-gray-800 font-semibold",children:["قیمت: ",n.price," هزارتومن"]}),(0,l.jsx)("p",{className:"text-gray-600",children:n.model}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(c,{id:t})})]})]},1)})};function h(){let[e,t]=(0,s.useState)([]),[r,a]=(0,s.useState)(""),[i,c]=(0,s.useState)(""),[h,f]=(0,s.useState)(!0),[x,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{f(!0);try{let e=await o.A.get("http://localhost:8000/datas");t(e.data)}catch(e){m("خطا در دریافت داده‌ها"),console.error("Error fetching data:",e)}finally{f(!1)}})()},[]);let p=(0,s.useMemo)(()=>[...new Set(e.map(e=>e.model))],[e]),{cartItems:g}=(0,d.n)(),v=(0,s.useMemo)(()=>g.reduce((t,r)=>{let l=e.find(e=>e.id.toString()===r.id.toString());return t+((null==l?void 0:l.price)||0)*r.qty},0),[g,e]);return h?(0,l.jsx)(n.A,{children:"در حال بارگذاری..."}):x?(0,l.jsx)(n.A,{children:x}):(0,l.jsxs)(n.A,{children:[(0,l.jsx)("h4",{className:"py-5 text-d text-right",children:"لوازم جانبی شاتون"}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,l.jsxs)("div",{className:"md:w-1/4 p-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"جستجو...",className:"border p-2 w-full mb-4",value:r,onChange:e=>a(e.target.value)}),(0,l.jsxs)("select",{className:"border p-2 w-full",value:i,onChange:e=>c(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"همه مدل‌ها"}),p.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsx)("div",{className:"md:w-3/4 grid lg:grid-cols-3 md:grid-cols-4 sm:grid-cols-3 grid-cols-2 gap-3 cursor-pointer",children:g.map(e=>(0,l.jsx)(u,{...e},e.id.toString()))})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("p",{children:["قیمت کل: ",v.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})})]})}},8270:(e,t,r)=>{"use strict";r.d(t,{default:()=>a,n:()=>d});var l=r(5155),n=r(2115);let s=(0,n.createContext)(void 0),d=()=>{let e=(0,n.useContext)(s);if(!e)throw Error("FunContext must be used within a CartProvider");return e};function a(e){let{children:t}=e,[r,d]=(0,n.useState)([]),a=r.reduce((e,t)=>e+t.qty,0);return(0,l.jsx)(s.Provider,{value:{cartItems:r,handleQty:e=>{d(t=>t.find(t=>t.id===e)?t.map(t=>t.id===e?{...t,qty:t.qty+1}:t):[...t,{id:e,qty:1}])},deHandleQty:e=>{d(t=>{let r=t.find(t=>t.id===e);return(null==r?void 0:r.qty)===1?t.filter(t=>t.id!==e):t.map(t=>t.id===e?{...t,qty:t.qty-1}:t)})},getQty:e=>{var t;return(null===(t=r.find(t=>t.id===e))||void 0===t?void 0:t.qty)||0},allDelet:e=>{d(t=>t.filter(t=>t.id!==e))},cartQty:a},children:t})}},4201:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var l=r(5155);let n=function(e){let{children:t}=e;return(0,l.jsx)("div",{className:"container mx-auto",children:t})}},5353:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return n}});let l=r(2115);function n(e,t){let r=(0,l.useRef)(()=>{}),n=(0,l.useRef)(()=>{});return(0,l.useMemo)(()=>e&&t?l=>{null===l?(r.current(),n.current()):(r.current=s(e,l),n.current=s(t,l))}:e||t,[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}},e=>{var t=t=>e(e.s=t);e.O(0,[8173,5714,2651,8441,1517,7358],()=>t(4519)),_N_E=e.O()}]);