{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/LENOVO/Desktop/allProject/habibiParts-main/app/store/page.tsx"],"sourcesContent":["\"use client\";\nimport { createClient } from \"@supabase/supabase-js\";\nimport { unstable_noStore as noStore } from \"next/cache\";\nimport { useEffect, useState } from \"react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { FunContext } from \"../context/Context\";\n\nexport const dynamic = \"force-dynamic\";\n\ninterface Product {\n  id: string;\n  title: string;\n  price: number;\n  imag?: string | null;\n}\n\nexport default function StorePage() {\n  const [isClient, setIsClient] = useState(false);\n  const [products, setProducts] = useState<Product[]>([]);\n  const [error, setError] = useState<string | null>(null);\n  \n  // استفاده از context\n  const { getQty, handleQty, deHandleQty } = FunContext();\n\n  useEffect(() => {\n    setIsClient(true);\n    fetchProducts();\n  }, []);\n\n  async function fetchProducts() {\n    noStore();\n    const supabase = createClient(\n      process.env.NEXT_PUBLIC_SUPABASE_URL!,\n      process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n    );\n\n    try {\n      const { data, error: queryError } = await supabase\n        .from(\"Habibi\")\n        .select(\"id, title, price, imag\")\n        .limit(10)\n        .order(\"id\", { ascending: false });\n\n      if (queryError) throw queryError;\n\n      setProducts(data || []);\n    } catch (err) {\n      const error = err as Error;\n      console.error(\"Full error details:\", error);\n      setError(error.message);\n    }\n  }\n\n  if (!isClient) {\n    return <div className=\"container mx-auto p-4\">در حال بارگذاری...</div>;\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mx-auto p-4 text-red-500 text-center\">\n        <h2 className=\"text-xl font-bold\">خطا در سیستم</h2>\n        <p>{error}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto p-4\">\n      <h1 className=\"text-2xl font-bold mb-6\">محصولات</h1>\n      {products.length > 0 ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          {products.map((product) => (\n            <Link key={product.id} href={`./store/${product.id}`} passHref>\n              <div className=\"border rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow cursor-pointer\">\n                <div className=\"relative h-48 w-full\">\n                  {product.imag ? (\n                    <Image\n                      src={product.imag}\n                      alt={product.title}\n                      fill\n                      className=\"object-cover\"\n                      sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n                      priority={false}\n                    />\n                  ) : (\n                    <div className=\"bg-gray-100 h-full w-full flex items-center justify-center\">\n                      <span className=\"text-gray-400\">بدون تصویر</span>\n                    </div>\n                  )}\n                </div>\n                <div className=\"p-4\">\n                  <h2 className=\"font-semibold text-lg mb-2\">\n                    {product.title}\n                  </h2>\n                  <p className=\"text-gray-600\">\n                    {product.price?.toLocaleString(\"fa-IR\")} تومان\n                  </p>\n                  <div className=\"flex items-center gap-2 mt-2\">\n                    <button\n                      className=\"w-6 h-6 bg-blue-500 rounded-sm text-white text-center\"\n                      onClick={(e) => {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        handleQty(Number(product.id));\n                      }}\n                    >\n                      +\n                    </button>\n                    <span>{getQty(Number(product.id))}</span>\n                    <button\n                      className=\"w-6 h-6 bg-red-500 rounded-sm text-white text-center\"\n                      onClick={(e) => {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        deHandleQty(Number(product.id));\n                      }}\n                    >\n                      -\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </Link>\n          ))}\n        </div>\n      ) : (\n        <p className=\"text-center py-8\">هیچ محصولی یافت نشد</p>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 296, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}