{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/LENOVO/Desktop/allProject/habibiParts-main/app/store/ProductDetailClient.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { createClientComponentClient } from \"@supabase/auth-helpers-nextjs\";\r\nimport { useRouter } from 'next/navigation';\r\n\r\ninterface Product {\r\n  id: string;\r\n  imag: string;\r\n  title: string;\r\n  model: string;\r\n  price: number;\r\n  description?: string;\r\n  stars: number;\r\n  order?: number;\r\n  // سایر فیلدهای موجود در جدول Habibi\r\n}\r\n\r\nexport default function ProductDetailClient({ params }: { params: { productId: string } }) {\r\n  const [product, setProduct] = useState<Product | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const router = useRouter();\r\n  const supabase = createClientComponentClient();\r\n\r\n  useEffect(() => {\r\n    fetchProduct();\r\n  }, [params.productId]);\r\n\r\n  const fetchProduct = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      // 1. استفاده از نام صحیح جدول (Habibi)\r\n      const { data, error: supabaseError } = await supabase\r\n        .from('Habibi') // تغییر به نام جدول شما\r\n        .select('*')\r\n        .eq('id', params.productId)\r\n        .single();\r\n\r\n      if (supabaseError) {\r\n        throw new Error('خطا در دریافت اطلاعات از سرور: ' + supabaseError.message);\r\n      }\r\n\r\n      if (!data) {\r\n        throw new Error('محصولی با این شناسه در جدول Habibi یافت نشد');\r\n      }\r\n\r\n      setProduct(data);\r\n    } catch (err: unknown) {\r\n      setError(err instanceof Error ? err.message : 'خطای ناشناخته در دریافت اطلاعات محصول');\r\n      console.error('جزئیات خطا:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };  const [quantity, setQuantity] = useState(1);\r\n\r\n  const handleQuantityChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = parseInt(e.target.value) || 1;\r\n    setQuantity(Math.max(1, Math.min(10, value)));\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-4 text-center\">\r\n        <div className=\"animate-pulse flex flex-col items-center space-y-4\">\r\n          <div className=\"w-full h-64 bg-gray-200 rounded\"></div>\r\n          <div className=\"w-3/4 h-6 bg-gray-200 rounded\"></div>\r\n          <div className=\"w-1/2 h-6 bg-gray-200 rounded\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"p-4 max-w-md mx-auto text-center\">\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n          {error}\r\n        </div>\r\n        <button\r\n          onClick={() => router.push('/')}\r\n          className=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\r\n        >\r\n          بازگشت به صفحه اصلی\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!product) {\r\n    return <div className=\"p-4 text-center\">محصولی یافت نشد</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 max-w-6xl mx-auto\">\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n        {/* بخش تصویر محصول */}\r\n        <div className=\"bg-gray-50 rounded-lg overflow-hidden shadow-md\">\r\n          {product.imag ? (\r\n            <img\r\n              src={product.imag}\r\n              alt={product.title}\r\n              className=\"w-full h-auto object-contain max-h-96\"\r\n              onError={(e) => {\r\n                const target = e.target as HTMLImageElement;\r\n                target.src = '/placeholder-product.png';\r\n              }}\r\n            />\r\n          ) : (\r\n            <div className=\"w-full h-96 flex items-center justify-center bg-gray-100 text-gray-400\">\r\n              تصویری موجود نیست\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* بخش اطلاعات محصول */}\r\n        <div dir=\"rtl\" className=\"space-y-6\">\r\n          <h1 className=\"text-2xl md:text-3xl font-bold text-gray-800\">{product.title}</h1>\r\n          {product.model && <p className=\"text-lg text-gray-600 mt-2\">{product.model}</p>}\r\n          \r\n          <div className=\"flex items-center\">\r\n            {product.stars && (\r\n              <div className=\"flex items-center text-yellow-400\">\r\n                {[...Array(5)].map((_, i) => (\r\n                  <svg\r\n                    key={i}\r\n                    className={`w-5 h-5 ${i < product.stars ? 'fill-current' : 'stroke-current fill-none'}`}\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\" />\r\n                  </svg>\r\n                ))}\r\n              </div>\r\n            )}\r\n            {product.order && (\r\n              <span className=\"text-sm text-gray-500 mr-2\">({product.order} سفارش)</span>\r\n            )}\r\n          </div>catch\r\n\r\n          <div className=\"py-4 border-t border-b border-gray-200\">\r\n            <div className=\"text-2xl font-semibold text-blue-600\">\r\n              {product.price?.toLocaleString('fa-IR')} تومان\r\n            </div>\r\n          </div>\r\n\r\n          {product.description && (\r\n            <div className=\"pt-4\">\r\n              <h2 className=\"text-lg font-semibold mb-3 text-gray-800\">توضیحات محصول</h2>\r\n              <p className=\"text-gray-700 whitespace-pre-line\">{product.description}</p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex flex-col sm:flex-row items-center justify-between pt-4 border-t border-gray-200 gap-4\">\r\n            <div className=\"flex items-center\">\r\n              <span className=\"ml-3 text-gray-700\">تعداد:</span>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"10\"\r\n                value={quantity}\r\n                onChange={handleQuantityChange}\r\n                className=\"w-16 px-2 py-1 border rounded text-center\"\r\n              />\r\n            </div>\r\n            <button className=\"px-6 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors w-full sm:w-auto\">\r\n              افزودن به سبد خرید\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 402, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 408, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/LENOVO/Desktop/allProject/habibiParts-main/app/store/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\"\r\nimport React from 'react'\r\nimport ProductDetailClient from '../ProductDetailClient'\r\n\r\n// تعریف نوع پارامترها\r\ntype PageParams = {\r\n  id: string\r\n}\r\n\r\n// تعریف پروپ‌های صفحه\r\ninterface PageProps {\r\n  params: PageParams\r\n  searchParams?: Record<string, string | string[] | undefined>\r\n}\r\n\r\nexport default function ProductDetailPage({ params }: PageProps) {\r\n  const { id } = params\r\n  \r\n  return (\r\n    <div className=\"p-4\">\r\n      <ProductDetailClient productId={id} />\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAee,SAAS,kBAAkB,EAAE,MAAM,EAAa;IAC7D,MAAM,EAAE,EAAE,EAAE,GAAG;IAEf,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,oIAAA,CAAA,UAAmB;YAAC,WAAW;;;;;;;;;;;AAGtC"}},
    {"offset": {"line": 433, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}